ğŸ›  MASTER FIX â€“ BROKEN ZLE LOGOS (NAVBAR + â€JEÄ TO ZLEâ€œ)

Loga se na strÃ¡nce nezobrazujÃ­ (jen ikonky rozbitÃ©ho obrÃ¡zku), i kdyÅ¾ je implementovanÃ½ LogoProvider a useTodaysLogo().

Ber to jako BUG. CÃ­l: loga se musÃ­ reÃ¡lnÄ› renderovat.
NeÅ™eÅ¡ uÅ¾ architekturu, jen oprav funkÄnost.

1) OvÄ›Å™, Å¾e hook opravdu vracÃ­ existujÃ­cÃ­ URL

OtevÅ™i logoContext.tsx (nebo soubor, kde je LogoProvider a useTodaysLogo()).

Najdi mÃ­sto, kde se vytvÃ¡Å™Ã­ pole log (logos).

DoÄasnÄ› tam pÅ™idej console.log("ZLE logos", logos) a spusÅ¥ appku.

Zkontroluj v konzoli:

jestli logos.length > 0,

a jak vypadajÃ­ hodnoty (musÃ­ to bÃ½t stringy, napÅ™. "/zle-logo/pro/zle-logo-raw.png").

ğŸ‘‰ Pokud je pole prÃ¡zdnÃ© nebo obsahuje divnÃ© hodnoty (napÅ™. [object Module], undefined, cesty zaÄÃ­najÃ­cÃ­ /public/public/... apod.), znamenÃ¡ to, Å¾e import.meta.glob je Å¡patnÄ› nastavenÃ½.

2) Oprav import.meta.glob tak, aby fungoval ve Vite

Tento projekt pouÅ¾Ã­vÃ¡ Vite + React.
DÅ¯leÅ¾itÃ© pravidlo:

import.meta.glob funguje pro soubory uvnitÅ™ src (ne pÅ™Ã­mo z public).

Soubory v public se servÃ­rujÃ­ pÅ™Ã­mo jako /zle-logo/pro/xxx.png, ale nejsou souÄÃ¡stÃ­ modulovÃ©ho grafu.

Proto:

Pokud teÄ pouÅ¾Ã­vÃ¡Å¡ glob na public (napÅ™. "../public/zle-logo/pro/*" nebo "/zle-logo/pro/*"),
â†’ to nevrÃ¡tÃ­ pouÅ¾itelnÃ© moduly / URL.

UdÄ›lej jednu z tÄ›chto dvou bezpeÄnÃ½ch variant (vyber jednu a aplikuj ji konzistentnÄ›):

Varianta A â€“ pÅ™esun log do src/assets (doporuÄeno)

V projektu pÅ™esuÅˆ sloÅ¾ku s logy:

z: client/public/zle-logo/pro

do: client/src/assets/zle-logo/pro

VÅ¡echna existujÃ­cÃ­ mÃ­sta, kde se na loga odkazuje jako na /zle-logo/pro/..., nech tak, jak jsou (logo rotÃ¡tor je jedinÃ½, kdo pouÅ¾Ã­vÃ¡ importy).

V logoContext.tsx nastav glob napÅ™. takto:

const logoModules = import.meta.glob(
  "./assets/zle-logo/pro/*.{png,jpg,jpeg,webp}",
  { eager: true, import: "default" }
)

const logos = Object.values(logoModules) as string[]


TÃ­m zÃ­skÃ¡Å¡ skuteÄnÃ¡ URL, kterÃ¡ lze dÃ¡t pÅ™Ã­mo do <img src="...">.

Varianta B â€“ explicitnÃ­ importy mÃ­sto globu

Pokud nechceÅ¡ pÅ™esouvat sloÅ¾ku:

Nech loga v public/zle-logo/pro,

V logoContext.tsx zruÅ¡ import.meta.glob a udÄ›lej explicitnÃ­ seznam:

const logos = [
  "/zle-logo/pro/zle-logo-raw.png",
  "/zle-logo/pro/zle-logo-3d.png",
  "/zle-logo/pro/zle-logo-clean.png",
  "/zle-logo/pro/zle-logo-street-matte.png",
  // ... vÅ¡echny, kterÃ© ve sloÅ¾ce jsou
]


Logiku logo dne (vÃ½bÄ›r podle data, context, hook) nech tak, jak jsi ji implementoval.

Tahle varianta nenÃ­ â€autoâ€œ pro novÃ© soubory, ale je 100% spolehlivÃ¡ a rychlÃ¡ na opravu.

3) Zkontroluj, Å¾e <img> mÃ¡ sprÃ¡vnÃ½ src

V Header.tsx / navbar komponentÄ› najdi <img data-testid="img-zle-logo">.

Ujisti se, Å¾e:

bere src z hooku useTodaysLogo() nebo contextu,

src je pÅ™esnÄ› ten string z pole logos,

nenÃ­ tam Å¾Ã¡dnÃ¡ manipulace typu new URL(...) navÃ­c, pokud uÅ¾ dostÃ¡vÃ¡Å¡ hotovÃ© URL.

TotÃ©Å¾ v hero sekci:

text â€JEÄ TO ZLEâ€œ â†’ ÄÃ¡st ZLE nahrazenÃ¡ <img> logem:

ovÄ›Å™, Å¾e tahle <img> taky pouÅ¾Ã­vÃ¡ stejnÃ½ src jako navbar.

4) Otestuj v prohlÃ­Å¾eÄi a v Network/Elements

SpusÅ¥ appku.

V devtools (Elements) klikni na <img data-testid="img-zle-logo">:

zkontroluj atribut src

zkuste ten src otevÅ™Ã­t pÅ™Ã­mo do novÃ©ho tabu â€“ musÃ­ se zobrazit obrÃ¡zek.

KdyÅ¾ je to ok, na strÃ¡nce uÅ¾ se logo zobrazÃ­.

5) Co nesmÃ­Å¡ zmÄ›nit

NemÄ›Åˆ nic v layoutu, stylovÃ¡nÃ­, textu, routingu.

Nesahej na jinÃ© ÄÃ¡sti aplikace (fotky, gallery, shop, storyâ€¦).

NemÄ›Åˆ fungovÃ¡nÃ­ LogoProvider / useTodaysLogo() kromÄ› opravy zdroje URL.

Je povoleno:

upravit nebo nahradit import.meta.glob,

pÅ™Ã­padnÄ› pÅ™esunout sloÅ¾ku s logy do src/assets,

nebo pouÅ¾Ã­t explicitnÃ­ pole cest.

âœ… CÃ­lovÃ½ stav

useTodaysLogo() vracÃ­ string URL existujÃ­cÃ­ho souboru loga.

Navbar logo vlevo se normÃ¡lnÄ› zobrazuje, ne jen rozbitÃ½ obrÃ¡zek.

â€JEÄ TO ZLEâ€œ pouÅ¾Ã­vÃ¡ stejnÃ© logo mÃ­sto textu ZLE.

VÅ¡echny loga majÃ­ stÃ¡le .zle-logo-polish efekt.

Å½ÃDNÃ jinÃ¡ ÄÃ¡st aplikace nenÃ­ zmÄ›nÄ›nÃ¡.