ğŸ”§ MASTER PROMPT PRO REPLIT â€“ ZLE AUTO-IMAGE LOADER v1.2 (bez duplicit, jen bezpeÄnÃ© Ãºpravy)

Jsi zkuÅ¡enÃ½ senior vÃ½vojÃ¡Å™ (TypeScript + React + Next.js + Tailwind CSS).
PracujeÅ¡ na projektu ZLE (skate/underground brand).

TvÅ¯j Ãºkol je minimÃ¡lnÃ­, bezpeÄnÃ½ a pÅ™esnÄ› ohraniÄenÃ½:

Upravit projekt tak, aby vÅ¡echny ÄÃ¡sti webu, kterÃ© zobrazujÃ­ fotky (hero, gallery, crew, bg kolÃ¡Å¾e atd.), automaticky pouÅ¾Ã­valy vÅ¡echny obrÃ¡zky ze svÃ½ch sloÅ¾ek v /public, mÃ­sto omezenÃ©ho â€œruÄnÃ­hoâ€ seznamu,
a zÃ¡roveÅˆ se na jednÃ© obrazovce neopakovaly stejnÃ© fotky v rÅ¯znÃ½ch sekcÃ­ch.
VÅ¡echny ostatnÃ­ ÄÃ¡sti kÃ³du musÃ­ zÅ¯stat beze zmÄ›ny, kromÄ› toho, co je v tomto zadÃ¡nÃ­ explicitnÄ› povoleno.

0) Co smÃ­Å¡ a co NESMÃÅ  dÄ›lat

SMÃÅ :

pÅ™idat novÃ© helper funkce / soubory pro naÄÃ­tÃ¡nÃ­ obrÃ¡zkÅ¯ (lib/image-loader.ts apod.),

zmÄ›nit zpÅ¯sob, jak se sestavujÃ­ pole s obrÃ¡zky (pÅ¯vodnÃ­ ruÄnÃ­ pole â†’ automaticky z adresÃ¡Å™Å¯),

v pÅ™Ã­padÄ› potÅ™eby upravit signatury komponent tak, aby dostÃ¡valy seznam obrÃ¡zkÅ¯ pÅ™es props (napÅ™. images: string[]).

NESMÃÅ :

mÄ›nit layout JSX (strukturu sekcÃ­, hierarchii, poÄty gridÅ¯),

mÄ›nit Tailwind CSS tÅ™Ã­dy, styly, animace a hover efekty,

mÄ›nit texty v UI,

pÅ™ejmenovÃ¡vat soubory, sloÅ¾ky, komponenty, props nebo typy, pokud to nenÃ­ nutnÃ© pro obrÃ¡zky,

mazat existujÃ­cÃ­ logiku, kterÃ¡ nesouvisÃ­ s naÄÃ­tÃ¡nÃ­m obrÃ¡zkÅ¯,

mÄ›nit routovÃ¡nÃ­, konfiguraci Next.js, env promÄ›nnÃ©, API routy, logiku formulÃ¡Å™Å¯ atd.

TvÅ¯j zÃ¡sah se musÃ­ tÃ½kat pouze logiky naÄÃ­tÃ¡nÃ­ seznamÅ¯ obrÃ¡zkÅ¯ a jejich pÅ™edÃ¡nÃ­ do komponent.

1) AnalÃ½za stÃ¡vajÃ­cÃ­ho stavu

Najdi vÅ¡echny ÄÃ¡sti, kde se pracuje s fotkami pro ZLE:

soubory jako hero-section.tsx, gallery-section.tsx, crew-section.tsx, dalÅ¡Ã­ sekce se ZLE fotkami,

konstanty typu HERO_IMAGES, GALLERY_IMAGES, CREW_IMAGES apod.

Zjisti, z jakÃ½ch sloÅ¾ek v /public tyto seznamy fotek pochÃ¡zejÃ­, napÅ™.:

/public/assets/gallery

/public/assets/bg-collage

/public/assets/hero

/public/assets/crew

pÅ™Ã­padnÄ› dalÅ¡Ã­ sloÅ¾ky pouÅ¾Ã­vanÃ© pro ZLE fotky.

Do JSX struktury, Tailwind tÅ™Ã­d ani textÅ¯ nezasahuj, pokud to nenÃ­ nutnÃ© kvÅ¯li pÅ™edÃ¡vÃ¡nÃ­ pole obrÃ¡zkÅ¯.

2) Helper pro ÄtenÃ­ fotek ze sloÅ¾ky

VytvoÅ™ (nebo uprav) soubor:

lib/image-loader.ts

Do nÄ›j pÅ™idej:

// lib/image-loader.ts
import fs from "fs"
import path from "path"

const IMAGE_EXTENSIONS = [".jpg", ".jpeg", ".png", ".webp", ".jfif"]

export function getImagesFromDir(relativeDir: string): string[] {
  const dirPath = path.join(process.cwd(), "public", relativeDir)

  if (!fs.existsSync(dirPath)) {
    return []
  }

  const files = fs.readdirSync(dirPath)

  return files
    .filter((file) => {
      const ext = path.extname(file).toLowerCase()
      return IMAGE_EXTENSIONS.includes(ext)
    })
    .map((file) => `/${relativeDir}/${file}`)
}


relativeDir = cesta bez /public, napÅ™. "assets/gallery" â†’ vÃ½slednÃ© URL /assets/gallery/xxx.jpg.

NepÅ™episuj jinÃ© existujÃ­cÃ­ helpery, jen tento soubor pÅ™idej / pouÅ¾ij.

3) NahrazenÃ­ ruÄnÃ­ch seznamÅ¯ fotek automatickÃ½m ÄtenÃ­m

U kaÅ¾dÃ©ho stÃ¡vajÃ­cÃ­ho seznamu fotek:

Najdi konstanty typu:

const GALLERY_IMAGES = [
  "/assets/gallery/xxx-01.jpg",
  "/assets/gallery/xxx-02.jpg",
  // ...
]


nebo generÃ¡tory:

const GALLERY_IMAGES = Array.from({ length: 24 }, (_, i) => ...)


NahraÄ je volÃ¡nÃ­m getImagesFromDir:

import { getImagesFromDir } from "@/lib/image-loader"

const GALLERY_IMAGES = getImagesFromDir("assets/gallery")
const HERO_IMAGES = getImagesFromDir("assets/hero")
const CREW_IMAGES = getImagesFromDir("assets/crew")
// podle potÅ™eby dalÅ¡Ã­ch sloÅ¾ek


Zachovej nÃ¡zvy tÄ›chto konstant, pokud nejsou v rozporu s nutnou Ãºpravou. CÃ­lem je zmÄ›nit jen zdroj dat, ne zbytek kÃ³du.

4) Server vs. client â€“ kde mÅ¯Å¾e bÄ›Å¾et fs

fs mÅ¯Å¾e bÄ›Å¾et jen na serveru.

VolÃ¡nÃ­ getImagesFromDir musÃ­ probÃ­hat v serverovÃ© vrstvÄ›:

v server komponentÄ› (bez "use client"),

nebo v app/page.tsx / getStaticProps / getServerSideProps (podle typu projektu).

Pokud je komponenta oznaÄenÃ¡ "use client" a pÅ™Ã­mo v nÃ­ je definovanÃ½ seznam fotek:

pÅ™esunÃ­ definici seznamu fotek do serverovÃ© vrstvy (napÅ™. app/page.tsx),

komponentÄ› pÅ™edej pole fotek pÅ™es props.

PÅ™Ã­klad pro App Router:

// app/page.tsx (server component)
import { getImagesFromDir } from "@/lib/image-loader"
import { HeroSection } from "@/components/hero-section"
import { GallerySection } from "@/components/gallery-section"

export default function HomePage() {
  const heroImages = getImagesFromDir("assets/hero")
  const galleryImages = getImagesFromDir("assets/gallery")

  return (
    <div>
      <HeroSection images={heroImages} />
      <GallerySection images={galleryImages} />
    </div>
  )
}


A v komponentÃ¡ch pouze minimÃ¡lnÃ­ Ãºprava:

// components/hero-section.tsx
"use client"

type HeroSectionProps = {
  images: string[]
}

export function HeroSection({ images }: HeroSectionProps) {
  // zachovej pÅ¯vodnÃ­ JSX, jen mÃ­sto pÅ¯vodnÃ­ konstanty pouÅ¾ij `images`
}


Strukturu komponenty, Tailwind tÅ™Ã­dy a obsah nech tak, jak je.

5) VÃ½sledek â€“ ÄtenÃ­ vÅ¡ech fotek

Po tÃ©to ÄÃ¡sti musÃ­ platit:

VÅ¡echny sekce (hero, gallery, crew, bg kolÃ¡Å¾eâ€¦) automaticky pouÅ¾Ã­vajÃ­ vÅ¡echny soubory v pÅ™Ã­sluÅ¡nÃ½ch sloÅ¾kÃ¡ch /public, ne jen ruÄnÄ› vybranÃ©.

PÅ™idÃ¡nÃ­ fotky do sloÅ¾ky (napÅ™. /public/assets/gallery) ji automaticky zapojÃ­ do zobrazenÃ­.

Vzhled (layout, poÄty fotek v gridech, styly) zÅ¯stÃ¡vÃ¡ stejnÃ½, mÄ›nÃ­ se jen datovÃ½ zdroj.

6) DÅ®LEÅ½ITÃ‰: Å½ÃDNÃ‰ DUPLICITY NA JEDNÃ‰ OBRAZOVCE

NavÃ­c musÃ­Å¡ zajistit:

PÅ™i jednom zobrazenÃ­ strÃ¡nky nesmÃ­ bÃ½t stejnÃ¡ fotka pouÅ¾itÃ¡ ve dvou rÅ¯znÃ½ch sekcÃ­ch zÃ¡roveÅˆ
(napÅ™. stejnÃ½ obrÃ¡zek v hero kolÃ¡Å¾i i v galerii zÃ¡roveÅˆ).

Implementuj to centrÃ¡lnÄ› na Ãºrovni strÃ¡nky, kde sklÃ¡dÃ¡Å¡ data pro sekce (napÅ™. app/page.tsx):

Sestav seznamy takto:

const heroAll = getImagesFromDir("assets/hero")
const heroImages = heroAll.slice(0, 6) // nebo jinÃ½ poÄet podle layoutu

const galleryAll = getImagesFromDir("assets/gallery")
const galleryImages = galleryAll
  .filter((src) => !heroImages.includes(src))
  .slice(0, 24)

const crewAll = getImagesFromDir("assets/crew")
const crewImages = crewAll
  .filter((src) => !heroImages.includes(src) && !galleryImages.includes(src))
  .slice(0, 4)


PouÅ¾ij tyto seznamy jako props pro jednotlivÃ© sekce.

TÃ­m zajistÃ­Å¡:

Å¾Ã¡dnÃ© opakovÃ¡nÃ­ napÅ™Ã­Ä sekcemi v rÃ¡mci jednoho renderu,

Å¾Ã¡dnÃ© vynucenÃ© zmÄ›ny layoutu â€“ poÅ™Ã¡d pracujeÅ¡ se stejnÃ½m poÄtem fotek v danÃ© sekci.

7) FinÃ¡lnÃ­ kontrola

Na konci ovÄ›Å™:

Projekt se bez chyb sestavÃ­ a bÄ›Å¾Ã­.

StrÃ¡nka vizuÃ¡lnÄ› vypadÃ¡ jako pÅ™edtÃ­m (layout, styly, texty beze zmÄ›ny).

Hero / gallery / crew sekce zobrazujÃ­ fotky z kompletnÃ­ch sloÅ¾ek, ne jen z omezenÃ½ch ruÄnÃ­ch seznamÅ¯.

Na jednÃ© obrazovce nenÃ­ stejnÃ¡ fotka pouÅ¾itÃ¡ ve dvou sekcÃ­ch zÃ¡roveÅˆ.

ProveÄ pÅ™esnÄ› tyto Ãºpravy a nic dalÅ¡Ã­ho nemÄ›Åˆ.